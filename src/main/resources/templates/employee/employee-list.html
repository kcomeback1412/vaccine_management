<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      th:replace="~{/layout/admin_template::areas(~{::title}, ~{::link}, ~{::#content_title}, ~{::main},~{::script})}">

<head>
    <title>Employee List</title>
    <link rel="stylesheet" th:href="@{css/emloyee-CSS/employee-list.css}">
</head>

<body>
<h2 class="my-0 ml-auto mr-auto" id="content_title">EMPLOYEE LIST</h2>
<main>

    <div>
        <div class="container-fluid bg-white">
            <p class="text-success h4" th:text="${msgSuccess}"></p>
            <p class="text-danger h4" th:text="${msgError}"></p>
            <div class="body_header">
                <div class="header_navbar">
                    <form id="page-size-option" th:action="@{/employee-list}" method="get">
                        <div class="header_navbar-item">
                            <span class="text mr-2">Show </span>
                            <select
                                    id="page-size-list"
                                    class="form-select"
                                    name="pageSize"
                            >
                                <option value="5" selected><i class="fa-solid fa-chevron-down"></i></option>
                                <option value="10" th:selected="${pageSize==10}">10</option>
                                <option value="25" th:selected="${pageSize==25}">25</option>
                                <option value="50" th:selected="${pageSize==50}">50</option>
                                <option value="100" th:selected="${pageSize==100}">100</option>
                            </select>
                            <span class="text ml-2"> entries</span>
                        </div>
                    </form>
                    <form th:action="@{/employee-list}" method="get">
                        <div class="header_navbar-item">
                            <span class="text">Search:</span>
                            <input
                                    name="nameForSearch"
                                    class="dropdown-list-search"
                                    th:value="${nameForSearch}"
                                    type="text"
                                    placeholder="Enter name to search"
                            />
                        </div>
                    </form>
                </div>
            </div>
            <form id="form-delete-update" th:action="@{/delete-update-employee}" method="post">
                <div class="body2">
                    <table class="table table-striped table-bordered">
                        <thead class="thead">
                        <tr class="table">
                            <th scope="col">
                                <input type="checkbox" onclick="checkAndUncheckAll(this)">
                            </th>
                            <th scope="col" class="text-center text-white">Employee ID</th>
                            <th scope="col" class="text-center text-white">Employee Name</th>
                            <th scope="col" class="text-center text-white">Date of Birth</th>
                            <th scope="col" class="text-center text-white">Gender</th>
                            <th scope="col" class="text-center text-white">Phone</th>
                            <th scope="col" class="text-center text-white">Address</th>
                            <th scope="col" class="text-center text-white">Image</th>
                        </tr>
                        </thead>
                        <tbody>

                        <tr th:each="employee : ${userDetails.content}">
                            <td>

                                <input type="checkbox" name="listId" th:value="${employee.id}"/>

                            </td>
                            <td th:text="${employee.id}"></td>
                            <td th:text="${employee.fullName}"></td>
                            <td th:text="${employee.dateOfBirth}"></td>
                            <td th:text="${employee.gender} == 0 ? 'Male' : 'Female'"></td>
                            <td th:text="${employee.phone}"></td>
                            <td th:text="${employee.address}"></td>
                            <td th:text="${employee.image}"></td>
                        </tr>

                        </tbody>
                    </table>
                </div>
                <div class="footer_buttons">
                    <div class="button_bussiness">
                        <span class="text_details"
                              th:text="'Showing '+ ${((currentPage - 1) * pageSize) + (userDetails.content.size() > 0  ? 1 : 0)}
                              + ' to ' + ${((currentPage - 1) * pageSize) + userDetails.content.size()}
                              + ' of ' + ${totalEmployee} + ' employee'">  </span>
                        <div class="buttons">
                            <a class="btn-create text-decoration-none" th:href="@{/create-employee}">New Employee</a>
                            <button
                                    name="update"
                                    class="btn-update"
                                    form="form-delete-update"
                            >
                                Update Employee
                            </button>
                            <button
                                    name="delete"
                                    class="btn-delete"
                                    form="form-delete-update"
                                    onclick="return confirm('Are you sure to delete?')"
                            >
                                Delete Employee
                            </button>

                        </div>
                    </div>
                </div>
            </form>

            <div class="paging">
                <div class="paging_button">
                    <nav aria-label="Page navigation example" class="d-flex justify-content-center">
                        <ul class="pagination">
                            <li th:attr="class=${currentPage > 1 ? 'page-item' : 'page-item disabled'}">
                                <a th:href="@{'/employee-list?pageNum=' + ${currentPage - 1}}"
                                   class="page-link "><</a>
                            </li>
                            <th:block th:each="i: ${#numbers.sequence(1, userDetails.totalPages)}">
                                <li th:attr="class=${userDetails == null ? 'page-item disabled' : 'page-item'}">
                                    <a th:attr="class=${i == currentPage ? 'page-link bg-primary text-white' : 'page-link'}"
                                       th:href="@{'/employee-list?pageNum=' + ${i}}"
                                       th:text="${i}"></a>
                                </li>
                            </th:block>
                            <li th:attr="class=${currentPage < userDetails.totalPages ? 'page-item' : 'page-item disabled'}">
                                <a th:href="@{'/employee-list?pageNum=' + ${currentPage + 1}}" class="page-link">
                                    ></a>
                            </li>
                        </ul>
                    </nav>
                </div>
            </div>
        </div>
    </div>
    </div>
</main>
<script th:src="@{/js/employee-JS/employee-list.js}"></script>
</body>

</html>